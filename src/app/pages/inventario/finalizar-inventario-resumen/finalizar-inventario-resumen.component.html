<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="onBack()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title 
      style="
      text-align: center; 
      padding-left: 0; 
      padding-right: 48px;"
    >
      Resumen del Inventario
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-row>
    <ion-col size="4" class="title"> Sucursal: </ion-col>
    <ion-col size="8">
      {{ selectedInventario?.sucursal?.nombre | titlecase }}
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="4" class="title"> Cant. sectores: </ion-col>
    <ion-col size="2">
      {{ sectorList?.length }}
    </ion-col>
    <ion-col size="4" class="title"> Cant. zonas: </ion-col>
    <ion-col size="2">
      {{ cantidadZonas }}
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="4">
      <ion-row class="title"> Inicio </ion-row>
      <ion-row>
        {{ selectedInventario?.fechaInicio | date: 'short' }}
      </ion-row>
    </ion-col>
    <ion-col size="4">
      <ion-row class="title"> Fin </ion-row>
      <ion-row>
        {{ selectedInventario?.fechaFin | date: 'short' }}
      </ion-row>
    </ion-col>
    <ion-col size="4">
      <ion-row class="title"> Duraci√≥n </ion-row>
      <ion-row>
        {{ duracion }}
      </ion-row>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="5" class="title">Colaboradores: </ion-col>
    <ion-col size="4">
      {{ colaboradores.length }}
    </ion-col>
  </ion-row>
  <ion-row
    *ngIf="
      selectedInventario?.estado === 'ABIERTO' &&
      mainService?.usuarioActual?.id === selectedInventario?.usuario?.id
    "
  >
    <ion-col size="12" style="text-align: center">
      <ion-button class="btn-success-flat" fill="clear"
        >Finalizar Inventario</ion-button
      >
    </ion-col>
  </ion-row>
  <ion-row
    *ngIf="
      (selectedInventario?.estado === 'CONCLUIDO' || selectedInventario?.estado === 'CANCELADO') &&
      mainService?.usuarioActual?.id === selectedInventario?.usuario?.id
    "
  >
    <ion-col size="12" style="text-align: center">
      <ion-button class="btn-success-flat" fill="clear" (click)="onReabrir()"
        >Reabrir Inventario</ion-button
      >
    </ion-col>
  </ion-row>
  <ion-row
    *ngIf="
      selectedInventario?.estado === 'CONCLUIDO' &&
      mainService?.usuarioActual?.id === selectedInventario?.usuario?.id
    "
  >
    <ion-col size="12" style="text-align: center">
      <ion-button class="btn-danger-flat" fill="clear" (click)="onCancelar()"
        >Cancelar Inventario</ion-button
      >
    </ion-col>
  </ion-row>
  <ion-row
  *ngIf="
    selectedInventario?.estado === 'CONCLUIDO' &&
    mainService?.usuarioActual?.id === selectedInventario?.usuario?.id
  "
>
  <ion-col size="12" style="text-align: center">
    <ion-button class="btn-warn-flat" fill="clear" (click)="onRevisar()"
      >Revisar Inventario</ion-button
    >
  </ion-col>
</ion-row>
  <ion-row
    *ngIf="
      selectedInventario?.estado === 'CONCLUIDO' &&
      mainService?.usuarioActual?.id === selectedInventario?.usuario?.id
    "
  >
    <ion-col size="12" style="text-align: center">
      <ion-button fill="clear" (click)="onNuevoInventario()"
        >Nuevo Inventario</ion-button
      >
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="12">
      <ion-card style="color: white">
        <ion-card-header>
          Progreso actual:
          {{ (terminadas * 100) / cantidadZonas | number: '1.0-0' }} %
        </ion-card-header>
        <ion-card-content>
          <canvas
            #doughnutCanvas
            style="position: relative; height: 20vh; width: 40vw; color: white"
          ></canvas>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>
